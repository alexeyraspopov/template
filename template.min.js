function Binding(a,b,c,d){this.type=a,this.scope=c,this.element=b,this.handler=d,observe(c,b.dataset[a],function(a){d.routine(b,a,c)})}function observe(a,b,c){var d=b.split("."),e=d.pop()||b;d.length&&(a=d.reduce(function(a,b){return a[b]},a)),Object.observe(a,function(a){a.filter(function(a){return a.name===e}).forEach(function(a){c(a.object[a.name])})}),c(a[e])}function write(a,b,c){var d=b.split("."),e=d.pop()||b;a=d.reduce(function(a,b){return a[b]},a),a[e]=c}function View(a,b){this.element=a,this.scope=b,this.bindings=[],this.compile(),this.bind()}Binding.prototype.bind=function(){this.handler.publish&&this.handler.bind(this.element,this.publish.bind(this))},Binding.prototype.publish=function(){write(scope,this.element.dataset[this.type],this.handler.value(this.element))},text=function(a,b){a.textContent=b},model={publish:!0,bind:function(a,b){a.addEventListener("change",b)},value:function(a){return a.value},routine:function(a,b){a.value=b}},View.prototype.compile=function(){var a={acceptNode:function(){return NodeFilter.FILTER_ACCEPT}},b=document.createTreeWalker(this.element,NodeFilter.SHOW_ELEMENT,a,!1),c=b.currentNode;do this.createBindings(c),c=b.nextNode();while(c)},View.prototype.createBindings=function(a){Object.keys(a.dataset).filter(function(a){return!!window[a]}).forEach(function(b){this.bindings.push(new Binding(b,a,this.scope,this.handler(b)))},this)},View.prototype.handler=function(a){return window[a]instanceof Function?{routine:window[a]}:window[a]},View.prototype.bind=function(){this.bindings.forEach(function(a){a.bind()})};